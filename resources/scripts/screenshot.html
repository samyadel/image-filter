<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <a class="btn btn-success" href="javascript:void(0);" onclick="generate();">Generate
    Screenshot Â»</a>
    <img src="../images/source-image.jpg" class="image" alt="">

    <script>
      (function (exports) {    
            function urlsToAbsolute(nodeList) {    
                if (!nodeList.length) {    
                    return [];    
                }    
                var attrName = 'href';    
                if (nodeList[0].__proto__ === HTMLImageElement.prototype || nodeList[0].__proto__ === HTMLScriptElement.prototype) {    
                    attrName = 'src';    
                }    
                nodeList = [].map.call(nodeList, function (el, i) {    
                    var attr = el.getAttribute(attrName);    
                    if (!attr) {    
                        return;    
                    }    
                    var absURL = /^(https?|data):/i.test(attr);    
                    if (absURL) {    
                        return el;    
                    } else {    
                        return el;    
                    }    
                });    
                return nodeList;    
            }    
    
            function screenshotPage() {    
                urlsToAbsolute(document.images);    
                urlsToAbsolute(document.querySelectorAll("link[rel='stylesheet']"));    
                var screenshot = document.querySelector(".image");    
                var b = document.createElement('base');    
                b.href = document.location.protocol + '//' + location.host;
                var blob = new Blob([screenshot], {    
                    type: 'image/png'    
                });    
                return blob;    
            }    
    
            function addOnPageLoad_() {    
                window.addEventListener('DOMContentLoaded', function (e) {    
                    var scrollX = document.documentElement.dataset.scrollX || 0;    
                    var scrollY = document.documentElement.dataset.scrollY || 0;    
                    window.scrollTo(scrollX, scrollY);    
                });    
            }    
    
            function generate() {    
                window.URL = window.URL || window.webkitURL;    
                window.open(window.URL.createObjectURL(screenshotPage()));    
            }    
            exports.screenshotPage = screenshotPage;    
            exports.generate = generate;    
        })(window);
    </script>
</body>
</html>